# Build a very simple docker compose file to test the Dockerfile
name: ${APP_NAME:-module-estimator}

services:
  app:
    build:
      context: .
      target: dev
      platforms:
        - linux/amd64
        - linux/arm64

    environment:
      - DEBUG=true
      - CI=false

    # https://docs.docker.com/compose/how-tos/file-watch/
    develop:
      watch:
        - path: src/
          action: sync
          target: /usr/share/nginx/html

    ports:
      - "8080:8080"
